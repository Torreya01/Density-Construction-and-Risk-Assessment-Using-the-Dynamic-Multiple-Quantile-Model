"0",""
"0","# Write function about the indicator function"
"0","indicator = function(x, threshold) {"
"0","  as.numeric(x > threshold)"
"0","}"
"0",""
"0","# Write function about the mean excess function"
"0","mean_excess = function(X, v){"
"0","  numerator = sum((X - v) * indicator(X, v))"
"0","  denominator = sum(indicator(X, v))"
"0","  value = numerator / denominator"
"0","  value = ifelse(is.nan(value), 0, value)"
"0","  value"
"0","}"
"0",""
"0","# Initialise mean excess values"
"0","en_i = rep(0, length(std_resid))"
"0",""
"0","# Use for loop "
"0","for (i in 1:length(std_resid)){"
"0","  value = mean_excess(std_resid, std_resid[i])"
"0","  en_i[i] = value"
"0","}"
"0",""
"0","# Plot the points"
"0","plot(std_resid, en_i,"
"0","     ylab = ""sample mean excess"", xlab = ""standardised residuals"")"
